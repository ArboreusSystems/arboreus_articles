# Private cloud.

Данная статья основана на реальном опыте разработки различных приложений для нужд различных компаний и организации:

* среда разработки интернет проектов с возможностью автоматически запускать огромное колиечство тестов
* дизайн студия занимающаяся разработкой сайтов по требованиям заказчиков
* университетский вычислительный центр в котором предоставлялись  возможности для каждого студента владеть своим собственным сервером 
* медицинская компания в которой было необходимо установить  огромное количество различных приложений необходимых для обеспечения работы

Для начала нужно разобраться в том что такое Cloud и какова предыстория возникновение таких решений.

Основываясь на открытых источниках [Wikipedia](https://en.wikipedia.org/wiki/Cloud_computing) (при желании вы можете найти огромное количество статей на эту тему): 

Cloud computing is shared pools of configurable computer system resources.

Иными словами можно провести аналогию с общественным транспортом, своего рода автобус в котором едет много пассажиров, где один двигатель, один салон, один водитель и самое главное автобус едет по строго определенному маршруту и не собирается никуда сворачивать и вы должны определять на сколько близко и удобно расположение остановки к вашему конечному пункту. И если у вас тяжелый багаж - может такси?

Помимо этого нужно четко понимать:

* что автопарк сугубо коммерческая организация и нацелена на получение прибыли и будет всегда стараться перевезти на одном автобусе как можно больше пассажиров в одну единицу времени а социальные маршруты встречаются крайне редко и только по очень настоятельному требованию регулирующих органов;
* вы не контролируете реальное техническое состояние автобуса, вы можете даже знать или проверить, что у автобуса сильно изношена какая-то запчасть и вот-вот может произойти критическая поломка;
* вы не можете контролировать тех кто поедет с вами рядом в тот или иной момент времени в салоне автобуса, может оказаться так что это будут хулиганы которые устроят драку и водитель будет вынужден вызвать полицию, а вы будете сидеть в салоне как свидетель и опаздывать на встречу на которую вы ехали;
* и т.д.

Можно привести огромное количество примеров но это тема не для этой статьи. Могут быть случае когда вы "налегке", на улице шикарная погода и для вас не оставит труда пройтись пешком от остановки автобуса до места назначения - тогда наиболее правильным выбором с точки зрения экономии будет cloud-автобус. Выбор типа хостинга описан в статье ["Cloud. Collocation. Private."](https://github.com/ArboreusSystems/arboreus_articles/blob/master/data_storage/cloud_collocation_private/rus.cloud_collocation_private.md)

Основное задачей данной статьи является демонстрация того, что возможно добиться сходного уровня автоматизации и комфорта как у лидеров: Amazon, Heroku, GoDaddy и т.д. не прибегая к огромным вложениям в пределах вашей компании.

Для реализации вам понадобится (выбор данных средств обусловлен тем что все что описано распространяется под лицензиями как свободное ПО не требует дополнительных затрат, помимо этого набора, существует огромное количество платных средств который вы можете использовать по своему смотрению), итак:

* Операционная система [FreeBSD](https://www.freebsd.org):  (возможно использовать и Linux, и даже Windows в качестве основной), автор статьи использует FreeBSD т.к. при использовании при высоких нагрузках показывает наибольшую производительность;
* Средства виртуализации или псевдо-виртуализации: [VirtualBox](https://www.virtualbox.org/wiki/Downloads) или [FreeBSD Jails](https://www.freebsd.org/doc/handbook/jails.html) (если быть точным то Jails это не средство виртуализации как таковое, это средство ограничить один процесс от других в пределах одного физического сервера, который можно использовать для совместного использования ресурсов сервера, при необходимости упростить управление jails можно использовать [Ezjail Tool](https://www.freebsd.org/doc/handbook/jails-ezjail.html))
* Средство автоматизации: [Jenkins](https://jenkins.io), является лидером в своем сегменте с очень хорошим комьюнити и документацией, что на начальном этапе моет быть очень важно;
* 2 сервера, один физический для организации host и второй который может быть установлен где угодно и как угодно для использования Jenkins (может быть установлен даже на вашем домашнем компьютере, если нет возможности использовать второй физический сервер);
* Системный администратор с относительно не высокой квалификацией, при желании достаточно просто можно изучить все самостоятельно, существует ОГРОМНОЕ количество учебной литературы по системному администрированию;

![](https://raw.githubusercontent.com/ArboreusSystems/arboreus_articles/master/freebsd/private_cloud/illustrations/private_cloud_001.png)

Как это работает?

Любое средство виртуализации предоставляет возможность управления им по средствам использования командной строки (shell command). В свою очередь [Jenkins](https://jenkins.io) как средство автоматизации предоставляет UI и средство исполнения shell command на любом сервере подключенном к нему. 

![](https://raw.githubusercontent.com/ArboreusSystems/arboreus_articles/master/freebsd/private_cloud/illustrations/private_cloud_002.png)

И это все что вам нужно!

Документацию по установке всех частей этой схемы можно найти по ссылкам:

* [установка FreeBSD](https://www.freebsd.org/doc/handbook/bsdinstall.html)
* [установка VirtualBox](https://www.freebsd.org/doc/handbook/virtualization-host-virtualbox.html)
* [установка Ezjail](https://www.freebsd.org/doc/handbook/jails-ezjail.html)
* [установка Jenkins](https://wiki.jenkins.io/display/JENKINS/FreeBSD)
* [SSH plugin для Jenkins](https://wiki.jenkins.io/display/JENKINS/SSH+plugin)

И огромное количество статей из неофициальных источников можно найти в интернете. По отдельности все задачи выполнялись неоднократно большим количеством людей, более того практически все cloud решения в интернете делают тоже самое.

Следите за обновлениями автора в [**Linkedin**](https://www.linkedin.com/in/alexandr-kirilov-3365b992/).

Следите за AR|BO|RE|US обновлениями в [**Twitter**](https://twitter.com/ArboreusSystems) в [**Linkedin**](www.linkedin.com/company/arboreus-systems/).






